\section{Structure of \texorpdfstring{$\hreals$}{*R}}
The goal of this section is to explore what $\hreals$ is ``like.'' To do this, we will use both work directly with the ultrapower definition of $\hreals$ and use the transfer principle.

To start with, all of the field axioms can be written down in our language $\mathcal{L}_\mathfrak{R}$. For instance, the fact that addition is commutative is
\[ (\forall x)(\forall y)(x + y = y + x), \]
and the fact that multiplicative inverses exist is 
\[ (\forall x)(x \neq 0 \to (\exists y)(x \cdot y = 1)). \]
So, we transfer all of the field axioms to $\hreals$ and concldue $\hreals$ is a field. Throughout this paper we will make use of high-school-level algebraic properties to rearrange equations and such, even beyond the field axioms---unless otherwise noted, the relevant properties of $\hreals$ can be justified by a simple use of transfer.

\subsection{Infinitesimal and Unlimited Hyperreals}

\begin{defn}
    A hyperreal $x \in \hreals$ is called
    \begin{itemize}
        \item \textit{infinitesimal} if $|x| < b$ for any $b \in \reals^+$.
        \item \textit{unlimited} if $b < |x|$ for any $b \in \reals^+$, and \textit{limited} otherwise.
        \item \textit{appreciable} if it is both limited and non-infinitesimal, i.e. if there are $b, c \in \reals^+$ such that $b \leq |x| \leq c$.
    \end{itemize}
\end{defn}

There is exactly one real infinitesimal, $0$. In $\hreals$, there are many more. Consider for a start $\delta = [\delta_n] = [\langle 1, \frac{1}{2}, \frac{1}{3}, \ldots \rangle]$. For any $r \in \reals^+$, there is some $m \in \nats$ such that $\frac{1}{m} < r$. So the cofinite set $\{n \in \nats \sthat n \geq m\}$ is a subset of $[[\delta_n < r]]$, so $[[\delta_n < r]] \in \mathcal{F}$, and so $\delta < r$. However, $[[0 < \delta_n]] = \nats \in \mathcal{F}$, and so $0 < \delta$. So $0 < \delta < r$ for any $r \in \reals^+$, and $\delta$ is infinitesimal.

Let $b \in \reals - \{0\}$. Now, in $\reals$, it's true that
\[
(\forall x)(\forall r)(|x| < \frac{r}{|b|} \to |b \cdot x| < r).
\] 
We can then transfer this to $\hreals$. With our abbreviations, we would write the sentence the exact same way, so we can say that this sentence is also true in $\hreals$. Now, if it's true for all $x$, then it must be true for $\delta$.
\[
(\forall r)(|\delta| < \frac{r}{|b|} \to |b \cdot \delta| < r)
\]
Let $r$ be any positive real number. Then $\frac{r}{|b|} \in \reals^+$, so $|\delta| < \frac{r}{|b|}$ (because $\delta$ is infinitesimal). Then, by applying our sentence, we know that $|b \cdot \delta| < r$. And this holds for any $r \in \reals^+$! So $b \cdot \delta$ is infinitesimal. Similarly, we know that
\[
(\forall x)(0 \neq x \to 0 \neq (b \cdot x))
\]
in $\reals$. So we transfer this $\hreals$, plug in $\delta$ for $x$, and since $0 \neq \delta$ we find $0 \neq (b \cdot x)$. Throughout this reasoning, we used the fact that $\delta$ was infinitesimal, but nothing else about it, so we conclude that if $\delta$ is any nonzero infinitesimal and $b \in \reals - \{0\}$, then $b \cdot \delta$ is a nonzero infinitesimal. Generalizing, we can conclude (with a little bit more work) that for any limited hyperreal $b$ and any infinitesimal $\delta$, we have $b \cdot \delta$ infinitesimal.

Now consider unlimited hyperreals. There are no unlimited reals. The hyperreal $H = [n] = [\langle 1, 2, 3, 4, \ldots \rangle]$ is unlimited, however. For any $r \in \hreals$, there is $m \in \nats$ such that $r < n$ for all $n > m$, and so the cofinite set $[[r < n]] \in \mathcal{F}$ meaning $r < [n] = H$. This is true for every $r \in \hreals$.

\begin{thm}[\protect{\cite[Chapter~5.2]{goldblatt1998}}]\label{arithmeticHyperreals}
    If $\epsilon, \delta$ are infinitesimal, $b, c$ are appreciable, and $H, K$ are unlimited, we have:
    \begin{itemize}
        \item $-\epsilon$, $\epsilon + \delta$, $\epsilon \cdot \delta$, $\epsilon \cdot b$, and $\frac{1}{H}$ infinitesimal.
        \item $-b$, $b + \epsilon$, $b \cdot c$, and $\frac{1}{b}$ appreciable.
        \item $b + c$ limited (possibly infinitesimal, as in $(1 + \delta) + (-1)$).
        \item $-H$, $H + \epsilon$, $H + b$, $b \cdot H$, $H \cdot K$, and $\frac{1}{\epsilon}$ (if $\epsilon \neq 0$) unlimited.
    \end{itemize}
\end{thm}

\subsection{Infinite Closeness \& Standard Parts}
\begin{defn}
    We say that two hyperreals $x, y$ are \textit{infinitely close}, and write $x \simeq y$, if $x - y$ is infinitesimal.
\end{defn}

Note that $\simeq$ is an equivalence relation. $x - x = 0$ is infinitesimal, $x - y$ is infinitesimal iff $-(x - y) = y - x$ is, and whenever $x - y$ and $y - z$ are infinitesimal their sum $(x - y) + (y - z) = x - z$ is as well. Note also that $x$ is infinitesimal iff $x \simeq 0$, and $x \simeq y$ iff $|x - y| < r$ for any $r \in \reals^+$.

\begin{thm}[\protect{\cite[Theorem~5.6.1]{goldblatt1998}}]
    Every limited hyperreal $b$ is infinitely close to exactly one real number, called the \textit{standard part} of $b$, denoted by $\stp{b}$.
\end{thm}

So the limited hyperreals are broken up into disjoint ``halos'' around each real number. The standard part function also has the nice property of respecting most arithmetic functions. For instance, $\stp{b + c} \simeq b + c$ (by definition), and $b + c - (\stp{b} + \stp{c}) = (b - \stp{b}) + (c - \stp{c})$, which is infinitesimal (as the sum of two infinitesimals). So $b + c \simeq \stp{b} + \stp{c}$, and so by transitivity of $\simeq$ we have $\stp{b + c} \simeq \stp{b} + \stp{c}$. Since both $\stp{b + c}$ and $\stp{b} + \stp{c}$ are real, their difference $stp{b + c} - (\stp{b} + \stp{c})$ must be real, and since they are infinitely close, their difference must be infinitesimal. Since the only real infinitesimal is $0$, that means $\stp{b+c} = \stp{b}+\stp{c}$.

That last move will be used frequently enough that it is worth stating as a theorem.
\begin{thm}
    If $a, b \in \reals$, and $a \simeq b$, then $a = b$.
\end{thm}

Also, since $\simeq$ is transitive, if $x, y \in \hreals$ are limited and $x \simeq y$, we have $stp{x} \simeq x \simeq y \simeq \stp{y}$ and therefore $\stp{x} = \stp{y}$. Similarly, if $\stp{x} = \stp{y}$, then $x \simeq \stp{x} = \stp{y} \simeq y$ and so $x \simeq y$.
\begin{corollary}
    If $x, y \in \hreals$ are both limited, then $x \simeq y$ if and only if $\stp{x} = \stp{y}$.
\end{corollary}

We can write similar proofs that $\st$ distributes over subtraction, multiplication, division, even absolute value ($\stp{|x|} = |\stp{x}|$) for limited values \cite[Theorem~5.6.2]{goldblatt1998}.

\begin{thm}[\protect{\cite[Exercise~5.7(4)]{goldblatt1998}}]
    Let $\mathbb{L}$ denote the ring of limited hyperreals, and $\mathbb{I}$ the ring of infinitesimals. Show that $\reals$ is isomorphic to the ring of limited hyperrationals $\hr{\mathbb{Q}} \cap \mathbb{L}$ factored by its ideal $\hr{\mathbb{Q}} \cap \mathbb{I}$.
\end{thm}

\begin{proof}
    Consider $\st: \hr{\mathbb{Q}} \cap \mathbb{L} \to \reals$. We want to use the first isomorphism theorem on rings, so we need to show that $\st$ is a ring homomorphism, its kernel is $\hr{\mathbb{Q}} \cap \mathbb{I}$, and its image is $\reals$. That $\st$ is a ring homorophism follows from the facts that $\stp{a \pm b} = \stp{a} \pm \stp{b}$ and $\stp{a \cdot b} = \stp{a} \cdot \stp{b}$ for any $a, b \in \hr{\mathbb{Q}} \cap \mathbb{L}$ because such $a, b$ are limited. $\stp{a} = 0$ iff $a \simeq 0$ iff $a$ is infinitesimal iff $a \in \hr{\mathbb{Q}} \cap \mathbb{I}$, so we conclude the kernel of $\st$ is $\hr{\mathbb{Q}} \cap \mathbb{I}$. 

    Finally, take any $x \in \reals$. We have
    \[ (\forall r \in \reals^+)(\exists q \in \mathbb{Q})(|x - q| < r). \]
    If we transfer this, we get
    \[ (\forall r \in \hr{\reals^+})(\exists q \in \hr{\mathbb{Q}})(|x - q| < r). \] 
    What is $\hr{\reals^+}$? Well $(\forall y)(y \in \reals^+ \leftrightarrow 0 < y)$, so by transfer $(\forall y)(y \in \hr{\reals^+} \leftrightarrow 0 < y)$. So $\hr{\reals^+}$ is the set of positive hyperreals. Take that sentence and plug in some positive infinitesimal $\delta$ for $r$. Then we have
    \[ (\exists q \in \hr{\mathbb{Q}})(|x - q| < \delta). \]
    But if $|x - q| < \delta$, then $|x - q| < r$ for any $r \in \reals^+$, and so $x \simeq q$. Since $x \in \reals$, this implies $\stp{q} = x$, and thus that $x$ is in the image of $\st$. 
    
    This is true for any $x \in \reals$, so the image of $\st$ must be all of $\reals$. Thus, we can use the first isomorphism theorem on rings to conclude $\hr{\mathbb{Q}} \cap \mathbb{L} / \hr{\mathbb{Q}} \cap \mathbb{I} \cong \mathbb{R}$.
\end{proof}

\subsection{Internal Structure of \texorpdfstring{$\hreals$}{*R}}
If we want to know about the subsets of $\hreals$, we might hopethat we can generalize \autoref{LosTheorem} to even more powerful logics, such as second-order logic, adding quantifiers on sets to get sentences like $(\forall A)(A \neq \emptyset \to (\exists x)(x \in A))$. This is impossible. $\reals$ is Dedekind complete---every set that has an upper bound has a least upper bound. With second-order quantification, we can write
\[ (\forall A)\big((\exists x)(\forall y \in A)(y \leq x) \to (\exists x)[(\forall y \in A)(y \leq x) \land (\forall z)(z < x \to (\exists y \in A)(z < y))]\big). \]
The transfer of this is not true in $\hreals$.

\begin{thm}\label{INoUpperBound}
    The set $\mathbb{I}$ of infinitesimals has an upper bound, but no least upper bound.
\end{thm}

\begin{proof}
    Any $r \in \reals^+$ is an upper bound on $\mathbb{I}$. Assume for contradiction $L$ is the least upper bound of $\mathbb{I}$. Surely $0 < L$, as there are infinitesimals greater than $0$. If $L$ is appreciable, then $\frac{L}{2}$ is appreciable (or unlimited), meaning it is an upper bound for $\mathbb{I}$ and thus that $L$ is not the least upper bound, contradiction. If $L$ is infinitesimal, though, then $2L$ is an infinitesimal with $L < 2L$, so $L$ is not an upper bound on $\mathbb{I}$, contradiction. So $L$ cannot be infinitesimal or non-infinitesimal, a contradiction.
\end{proof}

So, $\reals$ is Dedekind complete and $\hreals$ is not. However, we do get the following theorem as an easy consequence of \autoref{LosTheorem}.

\begin{thm}
    If $\varphi$ is a sentence of $\mathcal{L}_\mathfrak{R}$ and $\varphi(A)$ for every $A \subseteq \reals$, then $\hr{\varphi}(X)$ for every \textit{internal} subset $X \subseteq \hreals$.
\end{thm}

So, for any \textit{internal} subset $X \subseteq \hreals$, if $X$ has an upper bound, it has a least upper bound. This is proven as \cite[Theorem~11.5.1]{goldblatt1998} without using the above theorem. Goldblatt proves the above theorem in \cite[Theorem~13.12.1]{goldblatt1998}, although he's thinking about \textit{nonstandard frameworks}, a generalization of what we're doing here. Intuitively, the idea is that we're making a mistake when we try to transfer second-order sentences. In first order logic, if we write $(\forall v) \varphi$, we mean the same thing as $(\forall v \in \reals) \varphi$, and the appropriate transfer is $(\forall v \in \hreals) \varphi$. Similarly, if we write $(\forall A) \varphi$, this is equivalent to $(\forall A \in \mathcal{P}(\reals)) \varphi$, which transfers as $(\forall A \in \hr{\mathcal{P}(\reals)}) \varphi$, and $\hr{\mathcal{P}(\reals)} \neq \mathcal{P}(\hreals)$. Intuitively, the $\ast$-transform of $\mathcal{P}(\reals)$ should be all the sets $A = [A_n]$ such that $[[A_n \in \mathcal{P}(\reals)]] \in \mathcal{F}$, the internal sets. This is a reckless extension of concepts into undefined territory, and simplified to the point of falsehood---the rigorous details can be found in \cite[Chapter~13]{goldblatt1998}, specifically Theorem 13.12.1.

\begin{thm}{\protect{\cite[Exercise~12.2(1)]{goldblatt1998}}}\label{imageInternalSetIsInternal}
    If $f = [f_n]$ is an internal function, and $A = [A_n]$ is any internal subset of the domain $\dom f$, then the image set $f(A) = \{f(a) \sthat a \in A\}$ is the internal set $[f_n(A_n)]$
\end{thm}

\begin{proof}
    Say $y \in f(A)$. Then there exists $x \in A$ such that $f(x) = y$. Say $x = [x_n]$. Then $y = f(x) = [f_n(x_n)]$, i.e. $[[y = f_n(x_n)]] \in \mathcal{F}$. Since $f_n(x_n) \in f_n(A_n)$ for every $n$, this means $[[y \in f_n(A_n)]] \in \mathcal{F}$, i.e. $y \in [f_n(A_n)]$. Conversely, if $y \in [f_n(A_n)]$, then $[[y \in f_n(A_n)]] \in \mathcal{F}$. FOr each $n \in [[y \in f_n(A_n)]]$, there is an $x_n \in A_n$ such that $y_n = f_n(x_n)$, so we can define a sequence with all the $x_n$'s (taking any value we'd like where $n \notin [[y \in f_n(A_n)]]$) and get $[[y_n = f_n(x_n)]] \in \mathcal{F}$, i.e. $y = f(x)$. Since $[[x_n \in A_n]] \in \mathcal{F}$, this means $x \in A$ and $y \in f(A)$.
\end{proof}

\begin{thm}[\protect{\cite[Exercise~12.2(7)]{goldblatt1998}}]
    Let $f$ be an internal funciton such that $f(x) \simeq 0$ whenever $f$ is defined. Show that the range of of $f$ has an infinitesimal least upper bound.
\end{thm}

\begin{proof}
    First, we will show that the range of $f$ is internal, and then we will apply the Dedekind completeness. To show the range of $f$ is internal, we will first show that the domain of $f$ (denoted $\dom f$) is internal. Let $f = [f_n]$. $f([x_n]) = [f_n(x_n)]$ is defined iff $f_n(x_n)$ is defined $\mathcal{F}$-almost everywhere iff $[[x_n \in \dom f_n]] \in \mathcal{F}$ iff $[x_n] \in [\dom f_n]$. So $\dom f = [\dom f_n]$. So $f$ is an internal funciton and $\dom f$ is an internal set, so the range $f(\dom f)$ is internal by \autoref{imageInternalSetIsInternal}. Now, $f(x) \simeq 0$ for all $x \in \dom f$, so $1$ is an upper bound for the range of $f$. Hence, by Dedekind completeness, there is a least upper bound $L$ on the range of $f$. If $L$ were appreciable (or unlimited), then it would be positive (as any negative appreciable number is less than every infinitesimal) and $\frac{L}{2}$ would be a lesser upper bound, contradicitng $L$ being the least upper bound. Hence $L$ is infinitesimal.
\end{proof}

A particularly weird consequence of this is that any countable sequence $s^1, s^2, \ldots$ of infinitesimals has an infinitesimal upper bound, despite there being arbitrarily large infinitesimals. If each $s^k = [s^k_n]$, we can define the internal function $f: \hnats \to \hreals$ by $f = [f_n]$ where $f_n(k) = s^k_n$ for any $k \in \nats$. Then $f(k) = [f_n(k)] = [s^k_n] = s^k$. So by the theorem, the range of $f$ has an infinitesimal upper bound, which is also a bound for the sequence $s^k = f(\nats)$. 

